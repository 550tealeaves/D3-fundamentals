<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Radar / Star Chart</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      background: #f9f2ff;
      display: flex;
      justify-content: center;
      padding-top: 40px;
    }
    text {
      font-size: 12px;
      fill: #333;
    }
    .axis line {
      stroke: #bbb;
      stroke-width: 1px;
    }
    .axis text {
      fill: #333;
    }
  </style>
</head>
<body>

<script>
// Data
const data = [
  { animal: "Dogs", value: 20 },
  { animal: "Cats", value: 50 },
  { animal: "Birds", value: 10},
  { animal: "Fish", value: 5},
  { animal: "Hedgehog", value: 15}
];

// Dimensions
const width = 600;
const height = 700;
const radius = Math.min(width, height) / 2 - 50;

// Number of axes
const allAxis = data.map(d => d.animal);
const total = allAxis.length;

// SVG
const svg = d3.select("body")
  .append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", `translate(${width/2}, ${height/2})`);

// Scale for radial distance
const maxValue = d3.max(data, d => d.value);
const rScale = d3.scaleLinear()
  .range([0, radius])
  .domain([0, maxValue]);

// Draw grid circles
const levels = 5;
for (let level = 1; level <= levels; level++) {
  svg.append("circle")
    .attr("cx", 0)
    .attr("cy", 0)
    .attr("r", radius * level / levels)
    .attr("fill", "none")
    .attr("stroke", "#ccc")
    .attr("stroke-dasharray", "2,2");
}

// Draw axes
allAxis.forEach((axis, i) => {
  const angle = (Math.PI * 2 / total) * i - Math.PI / 2;
  const x = Math.cos(angle) * radius;
  const y = Math.sin(angle) * radius;

  // Axis line
  svg.append("line")
    .attr("x1", 0)
    .attr("y1", 0)
    .attr("x2", x)
    .attr("y2", y)
    .attr("stroke", "#bbb");

  // Axis label
  svg.append("text")
    .attr("x", x * 1.1)
    .attr("y", y * 1.1)
    .attr("dy", "0.35em")
    .attr("text-anchor", "middle")
    .text(axis);
});

// Generate radar points
const radarLine = d3.lineRadial()
  .radius(d => rScale(d.value))
  .angle((d,i) => i * 2 * Math.PI / total)
  .curve(d3.curveCardinalClosed);

// Draw radar area
const radarPath = svg.append("path")
  .datum(data)
  .attr("fill", "#FFFFAC88") //88 provides the opacity
  .attr("stroke", "#16DE2A")
  .attr("stroke-width", 2)
  .attr("d", d3.lineRadial()
                .radius(0)
                .angle((d,i) => i * 2 * Math.PI / total)
                .curve(d3.curveCardinalClosed));

// Animate radar
radarPath.transition()
  .duration(1500)
  .attr("d", radarLine);

// Add circles for each point
svg.selectAll(".radarCircle")
  .data(data)
  .join("circle")
    .attr("class", "radarCircle")
    .attr("r", 4)
    .attr("cx", 0)
    .attr("cy", 0)
    .attr("fill", "darkred")
  .transition()
    .duration(1500)
    .attr("cx", (d,i) => rScale(d.value) * Math.cos(i * 2 * Math.PI / total - Math.PI/2))
    .attr("cy", (d,i) => rScale(d.value) * Math.sin(i * 2 * Math.PI / total - Math.PI/2));

</script>

</body>
</html>
