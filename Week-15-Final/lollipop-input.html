<!-- Code from https://d3-graph-gallery.com/graph/lollipop_button_data_csv.html -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Lollipop with Input</title>
    <style>
      button{
        color: pink;
        background: navy;
        font-weight: bold;
        margin: 5px;
        margin-left: 60px;
      }
      button:hover{
        color: navy;
        background: pink;
        
      }
      
    </style>
  </head>
  <body>
    <h2 style="color: #6e5eeb">Which Legendary Pokemon from Generations 1-3 is the best?</h2>
    <!-- Add 2 buttons -->
    <button onclick="update('total')">Total</button>
    <button onclick="update('hp')">HP</button>
    <button onclick="update('attack')">Attack</button>
    <button onclick="update('defense')">Defense</button>
    <button onclick="update('sp_attack')">Special Attack</button>
    <button onclick="update('sp_defense')">Special Defense</button>
    <button onclick="update('speed')">Speed</button>
    <div id="container"></div>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script>

      // SET DIMENSIONS & MARGINS
      var margin = { top: 30, right: 30, bottom: 70, left: 60 },
        width = 960 - margin.left - margin.right,
        height = 600 - margin.top - margin.bottom;

      // CREATE SVG & APPEND TO BODY
      var svg = d3.select("#container")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

      // INITIALIZE X-AXIS
      var x = d3.scaleBand()
        .range([0, width])
        .padding(1);
      var xAxis = svg.append("g")
        .attr("transform", "translate(0," + height + ")")

      // INITIALIZE Y-AXIS
      var y = d3.scaleLinear()
        .range([height, 0]);
      var yAxis = svg.append("g")
        .attr("class", "myYaxis")


      // A FUNCTION THAT CREATES/UPDATES THE PLOT FOR GIVEN VARIABLE
      function update(selectedStat) {

        // LOAD/PARSE DATA
        d3.csv("pokemon_leg_myth.csv", function (data) {

          console.log('data', data);

          //FORMAT THE DATA
                data.forEach(d => {
                  d.name = d.name;
                  d.type1 = d.type1;
                  d.type2 = d.type2;
                  d.total = +d.total;
                  d.hp = +d.hp;
                  d.attack = +d.attack;
                  d.defense = +d.defense;
                  d.sp_attack = +d.sp_attack;
                  d.sp_defense = +d.sp_defense;
                  d.speed = +d.speed;
                  d.generation = +d.generation;
                });

          // X-AXIS
          x.domain(data.map(d => d.name))
          xAxis
            .transition()
            .duration(1000)
            .call(d3.axisBottom(x))

          // Y-AXIS
          y.domain([0, d3.max(data, d => +d[selectedStat])]);
          yAxis
          .transition()
          .duration(1000)
          .call(d3.axisLeft(y));

          // VARIABLE J: MAP DATA TO EXISTING CIRCLE
          var j = svg.selectAll(".myLine")
            .data(data)
          // update lines
          j
            .enter()
            .append("line")
            .attr("class", "myLine")
            .merge(j)
            .transition()
            .duration(1000)
            .attr("x1", d => { console.log(x(d.name)); return x(d.name); })
            .attr("x2", d => x(d.name))
            .attr("y1", y(0))
            .attr("y2", d => y(d[selectedStat]))
            .attr("stroke", "#718a9b");


          // VARIABLE U: MAP DATA TO EXISTING CIRCLE
          var u = svg.selectAll("circle")
            .data(data)
          // UPDATE CIRCLE
          u
            .enter()
            .append("circle")
            .merge(u)
            .transition()
            .duration(1000)
            .attr("cx", d => x(d.name))
            .attr("cy", d => y(d[selectedStat]))
            .attr("r", 8)
            .style("fill", "#ee1515")
            .attr("stroke", "#222224");
        })
      }

      // INITIALIZE PLOT
      update('total')

    </script>
  </body>
</html>








